(function(){window.Dash={Models:{},Collections:{},Views:{},Routers:{},init:function(){"use strict";return Dash.Parse=Parse,Dash.Parse.initialize("D7VKvOCpa2Pnt8lr3dvynhVQxoDW6AgiXVsyQuB1","Rs7IHkHHTTqv7O51TKwhNHMZnvQyvqrqUg5jn1pg"),new Dash.Routers.Routes}},$(function(){"use strict";return Dash.init()})}).call(this),this.JST=this.JST||{},this.JST["app/scripts/templates/Dashboard.html"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class="container">\n\n  <div class="row">\n    <div class="col-md-2">\n      <button class="btn btn-info">+ Add A New Deal</button>\n    </div>\n    <div class="col-md-1 col-md-offset-9">\n      <a href="#logout">Logout</a>\n    </div>\n  </div>\n\n  <hr>\n\n  {{#deals}}\n    <div class="row">\n      <div class="col-md-4">\n        <img src="{{mainImage.url}}"/>\n      </div>\n      <div class="col-md-5">\n        <h1>Deal Details</h1>\n        <p>{{heading}}</p>\n        <p>Created <span class="time">{{createdAt}}</span></p>\n        <!-- <p>Address : <span class="address">{{address}}</span></p> -->\n      </div>\n    </div>\n  {{/deals}}\n</div>';return __p},this.JST["app/scripts/templates/Landing.html"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class="landing">\n    <div class="login-form">\n        <h1>Welcome to Airbrowz</h1>\n        <p>Merchant login</p>\n          <input id="email" type="email" placeholder="Email" />\n          <input id="password" type="password" placeholder="Password" />\n          <button class="btn-wire-green" id="login">Submit</button>\n          <p>\n            <a href="#signup" style="color:white;">Create a new account</a>\n          </p>\n    </div>\n</div>';return __p},this.JST["app/scripts/templates/Signup.html"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div style="height:15vh;"></div>\n<div class="container" style="height:100vh;">\n\n  <form class="form-horizontal">\n    <div class="form-group">\n      <label class="col-sm-2 control-label">Email</label>\n      <div class="col-sm-10">\n        <input type="email" class="form-control" id="email" placeholder="Email">\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="col-sm-2 control-label">Password</label>\n      <div class="col-sm-10">\n        <input type="password" class="form-control" id="password" placeholder="Password">\n      </div>\n    </div>\n    \n    <div class="form-group">\n      <label class="col-sm-2 control-label">Description</label>\n      <div class="col-sm-10">\n        <textarea id="description" rows="3" style="width:100%;"></textarea>\n      </div>\n    </div>\n\n    <div class="form-group">\n      <label class="col-sm-2 control-label">Category</label>\n      <div class="col-sm-10">\n        <select id="category">\n          <option>-- Select --</option>\n          <option value="0">Fashion</option>\n          <option value="1">Food</option>\n          <option value="2">Electronics</option>\n          <option value="3">Entertainment</option>\n          <option value="4">Health/Fitness</option>\n          <option value="5">Service</option>\n          <option value="6">Lifestyle</option>\n          <option value="7">Furniture</option>\n          <option value="8">Misc</option>\n        </select>\n      </div>\n    </div>\n\n    <div class="form-group">\n      <label class="col-sm-2 control-label">Address</label>\n\n      <div class="col-sm-10">\n        <div class="row">\n          <div class="col-sm-2">\n            <input id="street_number" type="text" class="form-control" placeholder="Street #" />\n          </div>\n          <div class="col-sm-8">\n            <input id="street_name" type="text" class="form-control" placeholder="Street Name" />\n          </div>\n          <div class="col-sm-2">\n            <input id="postal_code" type="text" class="form-control" placeholder="Postal Code" />\n          </div>\n        </div>\n        <div class="row">\n          <div class="col-sm-8">\n            <input id="city" type="text" class="form-control" placeholder="City" />\n          </div>\n          <div class="col-sm-4">\n            <input id="province" type="text" class="form-control" placeholder="Province" />\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="form-group">\n      <div class="col-sm-1 col-sm-offset-11">\n        <button id="register" type="submit" class="btn btn-info">Register</button>\n      </div>\n    </div>\n\n  </form>\n</div>\n\n- capacity to upload profile of business including Tags\n- upload deals and information\n- upload photos and video for deals\n- set distance trigger for information to be sent';return __p},function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};Dash.Models.User=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.url="",d.prototype.initialize=function(){},d.prototype.defaults={},d.prototype.validate=function(a,b){},d.prototype.parse=function(a,b){return a},d}(Backbone.Model)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};Dash.Views.Landing=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["app/scripts/templates/Landing.html"],d.prototype.tagName="div",d.prototype.id="main",d.prototype.className="",d.prototype.events={"click #login":"login"},d.prototype.initialize=function(){return this.render()},d.prototype.render=function(){return this.$el.html(this.template())},d.prototype.login=function(a){var b,c;return a.preventDefault(),console.log("login"),b=$("#email").val(),c=$("#password").val(),Parse.User.logIn(b,c,{success:function(a){window.location.href="#dashboard"},error:function(a,b){alert("Wrong email/password. Please try again")}})},d}(Backbone.View)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};Dash.Routers.Routes=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.routes={"":"landing",signup:"signup",dashboard:"dashboard",logout:"logout"},d.prototype.initialize=function(){return Backbone.history.start()},d.prototype.landing=function(){return console.log("landing"),new Dash.Views.Landing({el:$("#main")[0]})},d.prototype.dashboard=function(){return console.log("dashboard"),Parse.User.current()?new Dash.Views.Dashboard({el:$("#main")[0]}):(console.log("need to authenticate"),window.location.href="/")},d.prototype.signup=function(){return console.log("signup"),new Dash.Views.Signup({el:$("#main")[0]})},d.prototype.logout=function(){return Parse.User.logOut(),window.location.href="/"},d}(Backbone.Router)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};Dash.Views.Signup=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["app/scripts/templates/Signup.html"],d.prototype.tagName="div",d.prototype.id="",d.prototype.className="",d.prototype.events={"click #register":"signup"},d.prototype.initialize=function(){return this.render()},d.prototype.render=function(){return this.$el.html(this.template())},d.prototype.signup=function(a){var b,c,d,e,f,g,h,i,j;return a.preventDefault(),d=$("#email").val(),e=$("#password").val(),c=$("#description").val(),i=$("#street_number").val(),h=$("#street_name").val(),f=$("#postal_code").val(),b=$("#city").val(),g=$("#province").val(),j=new Parse.User,j.set("username",d),j.set("password",e),j.set("email",d),j.set("description",c),j.set("street_number",i),j.set("street_name",h),j.set("postal_code",f),j.set("city",b),j.set("province",g),j.set("category",category),j.signUp(null,{success:function(a){window.location.href="#dashboard"},error:function(a,b){alert("Error: "+b.code+" "+b.message)}})},d}(Backbone.View)}.call(this),function(){"use strict";var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};Dash.Views.Dashboard=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.template=JST["app/scripts/templates/Dashboard.html"],d.prototype.tagName="div",d.prototype.id="",d.prototype.className="",d.prototype.events={},d.prototype.initialize=function(){var a=this;return Parse.User.current().fetch().then(function(b){var c;return console.log(b.toJSON()),a.user=Parse.User.current(),c=new Parse.Query("Deals"),c.equalTo("owner",b),c.find({success:function(b){return a.collection=_.map(b,function(a){return a.toJSON()}),a.render()}})})},d.prototype.render=function(){var a;return a=Mustache.render(this.template(),{deals:this.collection}),this.$el.html(a),_.map($(".time"),function(a){var b;return b=$(a).html(),$(a).html(moment(b).fromNow())})},d}(Backbone.View)}.call(this);